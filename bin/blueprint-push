#!/usr/bin/python

import logging
import optparse
import re
import sys

import blueprint
import blueprint_io

parser = optparse.OptionParser('Usage: %prog <name>')

(options, args) = parser.parse_args()


if 1 != len(args):
    parser.print_usage()
    sys.exit(1)
if re.search(r'[/ \t\r\n]', args[0]):
    logging.error('invalid blueprint name')
    sys.exit(1)
name = args[0]

try:
    b = blueprint.Blueprint(name=name)
except KeyError:
    logging.error('blueprint {0} does not exist'.format(name))
    sys.exit(1)
    
try:
    blueprint_io.push(b)
except IOError:
    pass